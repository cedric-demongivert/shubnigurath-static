{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.602b979891ee722905d6.hot-update.js","sources":["webpack:///./components/page/loading/InitialState.tsx"],"sourcesContent":["import React from 'react'\r\nimport classnames from 'classnames'\r\nimport { Empty } from '../../../typescript/utils'\r\n\r\n/**\r\n * \r\n */\r\nexport class InitialState extends React.PureComponent<InitialState.Properties> {\r\n  /**\r\n   * \r\n   */\r\n  public static readonly defaultProps: InitialState.Properties = Object.seal({\r\n    /**\r\n     * \r\n     */\r\n    onSelection: Empty.callback\r\n  })\r\n\r\n  /**\r\n   * \r\n   */\r\n  private readonly _input: React.RefObject<HTMLInputElement>\r\n\r\n  /**\r\n   * \r\n   */\r\n  public constructor (properties: InitialState.Properties) {\r\n    super(properties)\r\n\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handlePageClick = this.handlePageClick.bind(this)\r\n    this.handleDrop = this.handleDrop.bind(this)\r\n    this.handleSilentAction = this.handleSilentAction.bind(this)\r\n    this.handleCancel = this.handleCancel.bind(this)\r\n\r\n    this._input = React.createRef()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private handleInputChange(event: React.ChangeEvent<HTMLInputElement>): void {\r\n    if (event.target.files.length > 0) {\r\n      this.props.onSelection(event.target.files[0])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private handleSilentAction(event: React.SyntheticEvent): void {\r\n    event.stopPropagation()\r\n    event.preventDefault()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private handleDrop(event: React.DragEvent<HTMLInputElement>): void {\r\n    event.stopPropagation()\r\n    event.preventDefault()\r\n\r\n    const dragged: DataTransfer = event.dataTransfer\r\n\r\n    if (dragged.files.length > 0) {\r\n      for (const file of dragged.files) {\r\n        if (file.name.endsWith('.sheet.unidoc')) {\r\n          this.props.onSelection(file)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private handlePageClick(event: React.MouseEvent<HTMLDivElement>): void {\r\n    this._input.current.click()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private handleCancel(event: React.MouseEvent<HTMLButtonElement>): void {\r\n    event.stopPropagation()\r\n\r\n    this.props.onCancel()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public render () : React.ReactElement {\r\n    return (\r\n      <div \r\n        onDrop={this.handleDrop} \r\n        onDragEnter={this.handleSilentAction}\r\n        onDragOver={this.handleSilentAction}\r\n        onClick={this.handlePageClick} \r\n        className={classnames('page page-loading is-clickable', this.props.className)}\r\n      >\r\n        <div className='layout layout-centered'>\r\n          <div className='container-fluid'>\r\n            <div className='row justify-content-center align-items-center'>\r\n              <div className='col-10 col-md-8 col-lg-6 col-xl-6 text-center'>\r\n                <img className='img-fluid' src='./images/logo.svg' />\r\n              </div>\r\n            </div>\r\n            <div className='row justify-content-center align-items-center'>\r\n              <div className='col-10 col-md-8 col-lg-6 col-xl-6 text-center'>\r\n                <br/>\r\n                <br/>\r\n                <br/>\r\n                DÃ©posez une feuille de personnage ou cliquez pour en choisir une.\r\n                <input \r\n                  onChange={this.handleInputChange}\r\n                  ref={this._input} \r\n                  type='file' \r\n                  accept='.sheet.unidoc' \r\n                  style={{ display: 'none' }}\r\n                />\r\n                { this.props.cancellable ? <br/> : null }\r\n                { this.props.cancellable ? <br/> : null }\r\n                { this.props.cancellable ? <button className='btn btn-link btn-block' onClick={this.handleCancel}>Annuler</button> : null }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport namespace InitialState {\r\n  /**\r\n   * \r\n   */\r\n  export type SelectionCallback = (file: File) => void\r\n\r\n  /**\r\n   * \r\n   */\r\n  export type Properties = {\r\n    /**\r\n     * \r\n     */\r\n    className?: string | undefined,\r\n\r\n    /**\r\n     * \r\n     */\r\n    cancellable?: boolean,\r\n\r\n    /**\r\n     * \r\n     */\r\n    onSelection?: SelectionCallback,\r\n\r\n    /**\r\n     * \r\n     */\r\n    onCancel?: () => void | undefined\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAGA;AACA;AACA;AACA;AACA;AAEA;AATA;AAUA;AAEA;AACA;AACA;AACA;AACA;AAnCA;AAAA;AAAA;AAmCA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AA3CA;AAAA;AAAA;AA4CA;AACA;AACA;AAEA;AACA;AACA;AACA;AAnDA;AAAA;AAAA;AAoDA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAEA;AACA;AACA;AACA;AAtEA;AAAA;AAAA;AAuEA;AACA;AAEA;AACA;AACA;AACA;AA7EA;AAAA;AAAA;AA8EA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAtFA;AAAA;AAAA;AAuFA;AAEA;AACA;AACA;AACA;AACA;AALA;AAOA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AASA;AAAA;AAAA;AAOA;AA5HA;AACA;AADA;AAAA;AA+HA;AACA;AACA;AACA;AAlIA;AAKA;AACA;AACA;AACA;AAJA;AACA;AA6HA;;;;A","sourceRoot":""}